
import java.util.*;
import java.net.*;
import java.io.*;

public class ListenSocketThread extends Thread {

    public ServerSocket ss;

    public ArrayList<Socket> Sockets;

    public ArrayList<String> Direcciones;

    public ListenSocketThread (ServerSocket ss, ArrayList<Socket> Sockets, ArrayList<String> Direcciones) {

        this.ss = ss;

        this.Sockets = Sockets;

        this.Direcciones = Direcciones;

    }   

    public void run() {

        while(true){

            try{ /*El hilo de escucha de sockets tiene como argumentos dos array list, uno de sockets y otro de direcciones IP para guardar las direcciones 
                que el socket le mande.*/

                Socket s = this.ss.accept();

                this.Sockets.add(s);

                DataInputStream dint = new DataInputStream(s.getInputStream());

                byte[] mensajeByte = new byte[dint.readInt()];
                dint.readFully(mensajeByte, 0, mensajeByte.length);

                this.Direcciones.add(new String(mensajeByte));

            } catch (Exception e) {}

        }

    }



}